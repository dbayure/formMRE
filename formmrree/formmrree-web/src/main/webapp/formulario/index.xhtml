<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		
		<h:form prependId="false" id="form">
			<h1 style="text-align: center;">Listado de retornantes al pa√≠s</h1>
			
			 <p:toolbar>  
			    <p:toolbarGroup align="left">  
			        <p:commandButton  ajax="false" value="Nuevo" icon="ui-icon-document" action="#{formulariosBean.add}" />
			    </p:toolbarGroup>  
			  </p:toolbar>  
			
			<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
			
			<div style="clear: both;"></div>
			<br />
			
			<p:dataTable id="formularios" var="_formulario" value="#{formularios}" rowKey="#{_formulario.id}" paginator="true" rows="10"
				selection="#{formulariosBean.selectedFormulario}" selectionMode="single" filteredValue="#{formulariosBean.formulariosFiltrados}"
				resizableColumns="true" liveResize="true" >
			
				<p:column headerText="Id" sortBy="id" filterBy="id" id="id">  
		            #{_formulario.id}  
		        </p:column>
		        
		        <p:column headerText="Fecha Entrevista" sortBy="fechaEntrevista" filterBy="fechaEntrevista" id="fechaEntrevista">  
		            #{_formulario.fechaEntrevista}  
		        </p:column>
		        
		        <p:column headerText="Funcionario" sortBy="funcionario" filterBy="funcionario" id="funcionario">  
		            #{_formulario.funcionario}  
		        </p:column>
		        
		        <p:column headerText="Observaciones" sortBy="observaciones" filterBy="observaciones" id="observaciones">  
		            #{_formulario.observaciones}  
		        </p:column>
		        
			</p:dataTable>
			
			 <h:panelGroup rendered="#{empty formulariosBean.selectedFormulario.personas}">
		         <em>No hay personas registradas.</em>
		     </h:panelGroup>
			
			<p:dataTable var="_persona" value="#{formulariosBean.selectedFormulario.personas}" 
				resizableColumns="true" liveResize="true" id="personas" rendered="#{!empty formulariosBean.selectedFormulario.personas}">  
  
		  
		        <f:facet name="header">  
		            Personas Registradas  
		        </f:facet>  
		  
		        <p:column headerText="Nombre">  
		            <h:outputText value="#{_persona.nombre}" />  
		        </p:column>
		        
		        <p:column headerText="Apellido">  
		            <h:outputText value="#{_persona.apellido}" />  
		        </p:column>    
		  
		        <p:column headerText="Tipo Documento">  
		            <h:outputText value="#{_persona.documento.tipoDocumento.nombre}" />  
		        </p:column>
		        
		        <p:column headerText="Documento">  
		            <h:outputText value="#{_persona.documento.documento}" />  
		        </p:column>
		    </p:dataTable>  
 			
		</h:form>
	</ui:define>
</ui:composition>
